<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Atem  Reference</title>
    <link rel="stylesheet" type="text/css" href="css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="css/highlight.css" />
    <meta charset='utf-8'>
    <script src="js/jquery.min.js" defer></script>
    <script src="js/jazzy.js" defer></script>
    
  </head>
  <body>
    <a title="Atem  Reference"></a>
    <header>
      <div class="content-wrapper">
        <p><a href="index.html">Atem Docs</a> (25% documented)</p>
        <p class="header-right"><a href="https://github.com/Dev1an/Swift-Atem"><img src="img/gh.png"/>View on GitHub</a></p>
      </div>
    </header>
    <div class="content-wrapper">
      <p id="breadcrumbs">
        <a href="index.html">Atem Reference</a>
        <img id="carat" src="img/carat.png" />
        Atem  Reference
      </p>
    </div>
    <div class="content-wrapper">
      <nav class="sidebar">
        <ul class="nav-groups">
          <li class="nav-group-name">
            <a href="Classes.html">Classes</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Classes/Controller.html">Controller</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes.html#/s:4Atem14MessageHandlerC">MessageHandler</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/MessageHandlerBase.html">MessageHandlerBase</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes.html#/s:4Atem24RespondingMessageHandlerC">RespondingMessageHandler</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/Switcher.html">Switcher</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Enums.html">Enumerations</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Enums/VideoSource.html">VideoSource</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Extensions.html">Extensions</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Extensions/Array.html">Array</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Protocols.html">Protocols</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Protocols/Message.html">Message</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/Serializable.html">Serializable</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Structs.html">Structures</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Structs/ChangePreviewBus.html">ChangePreviewBus</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/ChangeProgramBus.html">ChangeProgramBus</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/ChangeTransitionPosition.html">ChangeTransitionPosition</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/MessageTitle.html">MessageTitle</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/NewTimecode.html">NewTimecode</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/PreviewBusChanged.html">PreviewBusChanged</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/ProgramBusChanged.html">ProgramBusChanged</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/TransitionPositionChanged.html">TransitionPositionChanged</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <article class="main-content">
        <section>
          <section class="section">
            
            <h1 id='bmd-atem-protocol-implementation' class='heading'>BMD Atem Protocol implementation</h1>

<p>Implementation of BlackMagicDesign&rsquo;s ATEM communication protocol in Swift. It is written on top of Apple&rsquo;s new networking library <a href="https://github.com/apple/swift-nio">NIO</a> and implements both sides of the protocol: the control panel and the switcher side. This means that you can not only use it to control atem switchers but also to connect to your control panels without the need for a switcher. Opening a whole new world of applications for the Atem control panels. An example can be found at <a href="https://github.com/Dev1an/Atem-Simulator">Atem-Simulator</a></p>
<h2 id='usage' class='heading'>Usage</h2>

<p>After looking at the following examples, look the <a href="https://dev1an.github.io/Swift-Atem/">API reference</a> for more details.</p>
<h3 id='controller' class='heading'>Controller</h3>

<p>This example shows how to print a message when the preview bus changes</p>
<pre class="highlight swift"><code><span class="k">try</span> <span class="kt">Controller</span><span class="p">(</span><span class="nv">ipAddress</span><span class="p">:</span> <span class="s">"10.1.0.67"</span><span class="p">)</span> <span class="p">{</span> <span class="n">handler</span> <span class="k">in</span>
    <span class="n">handler</span><span class="o">.</span><span class="n">when</span><span class="p">{</span> <span class="p">(</span><span class="nv">change</span><span class="p">:</span> <span class="kt">PreviewBusChanged</span><span class="p">)</span> <span class="k">in</span>
        <span class="nf">print</span><span class="p">(</span><span class="n">change</span><span class="p">)</span> <span class="c1">// prints: 'Preview bus changed to input(x)'</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>
<h3 id='switcher' class='heading'>Switcher</h3>

<p>The following example shows you how to emulate the basic functionality of an atem switcher. It forwards the messages containing transition and preview &amp; program bus changes to the connected controller.</p>
<pre class="highlight swift"><code><span class="k">try</span> <span class="kt">Switcher</span> <span class="p">{</span> <span class="n">handler</span> <span class="k">in</span>
    <span class="n">handler</span><span class="o">.</span><span class="n">when</span> <span class="p">{</span> <span class="p">(</span><span class="nv">change</span><span class="p">:</span> <span class="kt">ChangePreviewBus</span><span class="p">)</span> <span class="k">in</span>
        <span class="k">return</span> <span class="p">[</span><span class="kt">PreviewBusChanged</span><span class="p">(</span><span class="nv">to</span><span class="p">:</span> <span class="n">change</span><span class="o">.</span><span class="n">previewBus</span><span class="p">,</span> <span class="nv">mixEffect</span><span class="p">:</span> <span class="n">change</span><span class="o">.</span><span class="n">mixEffect</span><span class="p">)]</span>
    <span class="p">}</span>
    <span class="n">handler</span><span class="o">.</span><span class="n">when</span><span class="p">{</span> <span class="p">(</span><span class="nv">change</span><span class="p">:</span> <span class="kt">ChangeProgramBus</span><span class="p">)</span> <span class="k">in</span>
        <span class="k">return</span> <span class="p">[</span><span class="kt">ProgramBusChanged</span><span class="p">(</span><span class="nv">to</span><span class="p">:</span> <span class="n">change</span><span class="o">.</span><span class="n">programBus</span><span class="p">,</span> <span class="nv">mixEffect</span><span class="p">:</span> <span class="n">change</span><span class="o">.</span><span class="n">mixEffect</span><span class="p">)]</span>
    <span class="p">}</span>
    <span class="n">handler</span><span class="o">.</span><span class="n">when</span> <span class="p">{</span> <span class="p">(</span><span class="nv">change</span><span class="p">:</span> <span class="kt">ChangeTransitionPosition</span><span class="p">)</span> <span class="k">in</span>
        <span class="k">return</span> <span class="p">[</span>
            <span class="kt">TransitionPositionChanged</span><span class="p">(</span>
                <span class="nv">to</span><span class="p">:</span> <span class="n">change</span><span class="o">.</span><span class="n">position</span><span class="p">,</span>
                <span class="nv">remainingFrames</span><span class="p">:</span> <span class="mi">250</span> <span class="o">-</span> <span class="kt">UInt8</span><span class="p">(</span><span class="n">change</span><span class="o">.</span><span class="n">position</span><span class="o">/</span><span class="mi">40</span><span class="p">),</span>
                <span class="nv">mixEffect</span><span class="p">:</span> <span class="n">change</span><span class="o">.</span><span class="n">mixEffect</span>
            <span class="p">)</span>
        <span class="p">]</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>

          </section>
        </section>
        <section id="footer">
          <p>&copy; 2018 <a class="link" href="" target="_blank" rel="external"></a>. All rights reserved. (Last updated: 2018-05-27)</p>
          <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external">jazzy ♪♫ v0.9.1</a>, a <a class="link" href="http://realm.io" target="_blank" rel="external">Realm</a> project.</p>
        </section>
      </article>
    </div>
  </body>
</div>
</html>
